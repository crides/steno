target_include_directories(app PRIVATE .)
target_sources(app PRIVATE hist.c stroke.c steno.c)
target_include_directories(app PRIVATE impl/zmk)
zephyr_library_include_directories(${ZEPHYR_LVGL_MODULE_DIR})
target_sources(app PRIVATE impl/zmk/behavior_steno.c impl/zmk/flash.c impl/zmk/keypress.c)
target_sources(app PRIVATE impl/zmk/iosevka_8.c impl/zmk/iosevka_16.c)

if (CONFIG_ZMK_EMBEDDED_STENO_ENABLE_UI)
    target_sources(app PRIVATE impl/zmk/disp.c)
else()
    target_compile_definitions(app PRIVATE -DSTENO_NOUI)
endif()

if (CONFIG_ZMK_EMBEDDED_STENO_FONT_JETBRAINSMONO_16)
    target_compile_definitions(app PRIVATE -DSTENO_FONT=jetbrainsmono_16 -DSTENO_FONT_HEIGHT=16 -DSTENO_FONT_EXTERN)
    target_sources(app PRIVATE impl/zmk/jetbrainsmono_16.c)
endif()
if (CONFIG_ZMK_EMBEDDED_STENO_FONT_UNSCII_8)
    target_compile_definitions(app PRIVATE -DSTENO_FONT=lv_font_unscii_8 -DSTENO_FONT_HEIGHT=8)
endif()
if (CONFIG_ZMK_EMBEDDED_STENO_FONT_ADASCII_8)
    target_compile_definitions(app PRIVATE -DSTENO_FONT=adascii_8 -DSTENO_FONT_HEIGHT=8 -DSTENO_FONT_EXTERN)
    target_sources(app PRIVATE impl/zmk/adascii_8.c)
endif()
if (CONFIG_ZMK_EMBEDDED_STENO_FONT_IOSEVKA_8)
    target_compile_definitions(app PRIVATE -DSTENO_FONT=iosevka_8 -DSTENO_FONT_HEIGHT=8 -DSTENO_FONT_EXTERN)
    target_sources(app PRIVATE impl/zmk/iosevka_8.c)
endif()
if (CONFIG_ZMK_EMBEDDED_STENO_FONT_IOSEVKA_12)
    target_compile_definitions(app PRIVATE -DSTENO_FONT=iosevka_12 -DSTENO_FONT_HEIGHT=12 -DSTENO_FONT_EXTERN)
    target_sources(app PRIVATE impl/zmk/iosevka_12.c)
endif()
if (CONFIG_ZMK_EMBEDDED_STENO_FONT_IOSEVKA_16)
    target_compile_definitions(app PRIVATE -DSTENO_FONT=iosevka_16 -DSTENO_FONT_HEIGHT=16 -DSTENO_FONT_EXTERN)
    target_sources(app PRIVATE impl/zmk/iosevka_16.c)
endif()

if (CONFIG_ZMK_EMBEDDED_STENO_DISP_INVERT)
    target_compile_definitions(app PRIVATE -DSTENO_DISP_INVERT)
endif()

if (CONFIG_ZMK_EMBEDDED_STENO_DICTEDIT)
	target_sources(app PRIVATE dict_editing.c freemap.c)
else()
	target_compile_definitions(app PRIVATE -DSTENO_READONLY)
endif()

# Don't need MSD

if (CONFIG_ZMK_EMBEDDED_STENO_STROKE_DISPLAY)
    target_compile_definitions(app PRIVATE -DSTENO_STROKE_DISPLAY)
endif()

if (CONFIG_ZMK_EMBEDDED_STENO_NOUNICODE)
	target_compile_definitions(app PRIVATE -DSTENO_NOUNICODE)
endif()

if (CONFIG_ZMK_EMBEDDED_STENO_NOORTHOGRAPHY)
	target_compile_definitions(app PRIVATE -DSTENO_NOORTHOGRAPHY)
else()
	target_sources(app PRIVATE orthography.c)
endif()

if (CONFIG_ZMK_EMBEDDED_STENO_DEBUG)
	target_compile_definitions(app PRIVATE -DSTENO_DEBUG)

    if (CONFIG_ZMK_EMBEDDED_STENO_DEBUG_HIST)
        target_compile_definitions(app PRIVATE -DSTENO_DEBUG_HIST)
    endif()

    if (CONFIG_ZMK_EMBEDDED_STENO_DEBUG_STROKE)
        target_compile_definitions(app PRIVATE -DSTENO_DEBUG_STROKE)
    endif()

    if (CONFIG_ZMK_EMBEDDED_STENO_DEBUG_FLASH)
        target_compile_definitions(app PRIVATE -DSTENO_DEBUG_FLASH)
    endif()

    if (CONFIG_ZMK_EMBEDDED_STENO_DEBUG_DICTED)
        target_compile_definitions(app PRIVATE -DSTENO_DEBUG_DICTED)
    endif()
endif()
